(()=>{const e=document,t=(e.getElementById("headerslot"),e.getElementById("header")),n=[];let r="Untitled";const l=e.getElementById("tasktable"),a=(new Date).toISOString().substr(0,10);document.querySelector("#taskdate").value=a;const o=()=>{const l=prompt("Rename project:").trim();if(null==l)return void console.log("no project name entered, aborting rename");t.innerHTML=`${l}<span class="material-symbols-outlined" id='projrenamer'>edit_square</span>`;const a=e.getElementById(r);a.innerHTML=l,a.setAttribute("id",l),n.filter((e=>{e.project==r&&(e.project=l)})),r=l,s()};let s=()=>{e.getElementById("projrenamer").addEventListener("click",o)};const d=e=>{const t=l.insertRow(0),n=t.insertCell(0),r=t.insertCell(1);n.textContent=e.task,r.innerHTML=e.date},i=()=>{l.innerHTML="",n.filter((e=>e.project==r)).forEach(d)},c=e=>{r=e.target.id,t.innerHTML=`${r}<span class="material-symbols-outlined" id='projrenamer'>edit_square</span>`,m(),i(),s()};let m=()=>{document.querySelectorAll("li").forEach((e=>{e.classList.remove("activeproj")})),e.getElementById(r).classList.add("activeproj")};e.getElementById("newprojbtn").addEventListener("click",(()=>{const n=prompt("Project name:")?.trim()??"";if(null==n||""==n)return void console.log("no name entered for new project; aborting new project");t.innerHTML=`${n}<span class="material-symbols-outlined" id='projrenamer'>edit_square</span>`,s();const l=e.createElement("li");projectlist.appendChild(l),l.setAttribute("id",n),l.addEventListener("click",c),l.innerHTML=`${n} <span class="material-symbols-outlined delprojbtn">delete</span>`,r=n,m(),i()})),e.getElementById("addbtn").addEventListener("click",(t=>{t.preventDefault(),1!=(()=>{if(""==document.getElementById("taskname").value.trim())return console.log("empty input, no task added"),!0})()&&((()=>{const e={task:document.getElementById("taskname").value.trim(),date:document.getElementById("taskdate").value,project:r};n.push(e),i(),console.log(n)})(),e.querySelector("form").reset(),document.querySelector("#taskdate").value=a)})),s(),e.getElementById("Untitled").addEventListener("click",c)})();